var Y={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},U=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];function V(t){return t===10||t===13||t===8232||t===8233||t===32||t===9||t===11||t===12||t===160||t>=5760&&U.indexOf(t)>=0}function H(t){switch(t|32){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:case 114:return!0}return!1}function T(t){return(t|32)===97}function A(t){return t>=48&&t<=57}function j(t){return t>=48&&t<=57||t===43||t===45||t===46}function J(t){this.index=0,this.path=t,this.max=t.length,this.result=[],this.param=0,this.err="",this.segmentStart=0,this.data=[]}function E(t){for(;t.index<t.max&&V(t.path.charCodeAt(t.index));)t.index++}function K(t){var n=t.path.charCodeAt(t.index);if(n===48){t.param=0,t.index++;return}if(n===49){t.param=1,t.index++;return}t.err="SvgPath: arc flag can be 0 or 1 only (at pos "+t.index+")"}function O(t){var n=t.index,r=n,e=t.max,i=!1,h=!1,a=!1,u=!1,c;if(r>=e){t.err="SvgPath: missed param (at pos "+r+")";return}if(c=t.path.charCodeAt(r),(c===43||c===45)&&(r++,c=r<e?t.path.charCodeAt(r):0),!A(c)&&c!==46){t.err="SvgPath: param should start with 0..9 or `.` (at pos "+r+")";return}if(c!==46){if(i=c===48,r++,c=r<e?t.path.charCodeAt(r):0,i&&r<e&&c&&A(c)){t.err="SvgPath: numbers started with `0` such as `09` are illegal (at pos "+n+")";return}for(;r<e&&A(t.path.charCodeAt(r));)r++,h=!0;c=r<e?t.path.charCodeAt(r):0}if(c===46){for(u=!0,r++;A(t.path.charCodeAt(r));)r++,a=!0;c=r<e?t.path.charCodeAt(r):0}if(c===101||c===69){if(u&&!h&&!a){t.err="SvgPath: invalid float exponent (at pos "+r+")";return}if(r++,c=r<e?t.path.charCodeAt(r):0,(c===43||c===45)&&r++,r<e&&A(t.path.charCodeAt(r)))for(;r<e&&A(t.path.charCodeAt(r));)r++;else{t.err="SvgPath: invalid float exponent (at pos "+r+")";return}}t.index=r,t.param=parseFloat(t.path.slice(n,r))+0}function I(t){var n,r;n=t.path[t.segmentStart],r=n.toLowerCase();var e=t.data;if(r==="m"&&e.length>2&&(t.result.push([n,e[0],e[1]]),e=e.slice(2),r="l",n=n==="m"?"l":"L"),r==="r")t.result.push([n].concat(e));else for(;e.length>=Y[r]&&(t.result.push([n].concat(e.splice(0,Y[r]))),!!Y[r]););}function Q(t){var n=t.max,r,e,i,h,a;if(t.segmentStart=t.index,r=t.path.charCodeAt(t.index),e=T(r),!H(r)){t.err="SvgPath: bad command "+t.path[t.index]+" (at pos "+t.index+")";return}if(h=Y[t.path[t.index].toLowerCase()],t.index++,E(t),t.data=[],!h){I(t);return}for(i=!1;;){for(a=h;a>0;a--){if(e&&(a===3||a===4)?K(t):O(t),t.err.length)return;t.data.push(t.param),E(t),i=!1,t.index<n&&t.path.charCodeAt(t.index)===44&&(t.index++,E(t),i=!0)}if(!i&&(t.index>=t.max||!j(t.path.charCodeAt(t.index))))break}I(t)}var Z=function(n){var r=new J(n),e=r.max;for(E(r);r.index<e&&!r.err.length;)Q(r);return r.err.length?r.result=[]:r.result.length&&("mM".indexOf(r.result[0][0])<0?(r.err="SvgPath: string should start with `M` or `m`",r.result=[]):r.result[0][0]="M"),{err:r.err,segments:r.result}};function B(t,n){return[t[0]*n[0]+t[2]*n[1],t[1]*n[0]+t[3]*n[1],t[0]*n[2]+t[2]*n[3],t[1]*n[2]+t[3]*n[3],t[0]*n[4]+t[2]*n[5]+t[4],t[1]*n[4]+t[3]*n[5]+t[5]]}function g(){if(!(this instanceof g))return new g;this.queue=[],this.cache=null}g.prototype.matrix=function(t){return t[0]===1&&t[1]===0&&t[2]===0&&t[3]===1&&t[4]===0&&t[5]===0?this:(this.cache=null,this.queue.push(t),this)};g.prototype.translate=function(t,n){return(t!==0||n!==0)&&(this.cache=null,this.queue.push([1,0,0,1,t,n])),this};g.prototype.scale=function(t,n){return(t!==1||n!==1)&&(this.cache=null,this.queue.push([t,0,0,n,0,0])),this};g.prototype.rotate=function(t,n,r){var e,i,h;return t!==0&&(this.translate(n,r),e=t*Math.PI/180,i=Math.cos(e),h=Math.sin(e),this.queue.push([i,h,-h,i,0,0]),this.cache=null,this.translate(-n,-r)),this};g.prototype.skewX=function(t){return t!==0&&(this.cache=null,this.queue.push([1,0,Math.tan(t*Math.PI/180),1,0,0])),this};g.prototype.skewY=function(t){return t!==0&&(this.cache=null,this.queue.push([1,Math.tan(t*Math.PI/180),0,1,0,0])),this};g.prototype.toArray=function(){if(this.cache)return this.cache;if(!this.queue.length)return this.cache=[1,0,0,1,0,0],this.cache;if(this.cache=this.queue[0],this.queue.length===1)return this.cache;for(var t=1;t<this.queue.length;t++)this.cache=B(this.cache,this.queue[t]);return this.cache};g.prototype.calc=function(t,n,r){var e;return this.queue.length?(this.cache||(this.cache=this.toArray()),e=this.cache,[t*e[0]+n*e[2]+(r?0:e[4]),t*e[1]+n*e[3]+(r?0:e[5])]):[t,n]};var $=g,G=$,N={matrix:!0,scale:!0,rotate:!0,translate:!0,skewX:!0,skewY:!0},W=/\s*(matrix|translate|scale|rotate|skewX|skewY)\s*\(\s*(.+?)\s*\)[\s,]*/,tt=/[\s,]+/,et=function(n){var r=new G,e,i;return n.split(W).forEach(function(h){if(!!h.length){if(typeof N[h]!="undefined"){e=h;return}switch(i=h.split(tt).map(function(a){return+a||0}),e){case"matrix":i.length===6&&r.matrix(i);return;case"scale":i.length===1?r.scale(i[0],i[0]):i.length===2&&r.scale(i[0],i[1]);return;case"rotate":i.length===1?r.rotate(i[0],0,0):i.length===3&&r.rotate(i[0],i[1],i[2]);return;case"translate":i.length===1?r.translate(i[0],0):i.length===2&&r.translate(i[0],i[1]);return;case"skewX":i.length===1&&r.skewX(i[0]);return;case"skewY":i.length===1&&r.skewY(i[0]);return}}}),r},b=Math.PI*2;function z(t,n,r,e){var i=t*e-n*r<0?-1:1,h=t*r+n*e;return h>1&&(h=1),h<-1&&(h=-1),i*Math.acos(h)}function rt(t,n,r,e,i,h,a,u,c,s){var f=s*(t-r)/2+c*(n-e)/2,l=-c*(t-r)/2+s*(n-e)/2,o=a*a,d=u*u,_=f*f,v=l*l,m=o*d-o*v-d*_;m<0&&(m=0),m/=o*v+d*_,m=Math.sqrt(m)*(i===h?-1:1);var C=m*a/u*l,x=m*-u/a*f,y=s*C-c*x+(t+r)/2,X=c*C+s*x+(n+e)/2,M=(f-C)/a,w=(l-x)/u,q=(-f-C)/a,P=(-l-x)/u,D=z(1,0,M,w),S=z(M,w,q,P);return h===0&&S>0&&(S-=b),h===1&&S<0&&(S+=b),[y,X,D,S]}function at(t,n){var r=1.3333333333333333*Math.tan(n/4),e=Math.cos(t),i=Math.sin(t),h=Math.cos(t+n),a=Math.sin(t+n);return[e,i,e-i*r,i+e*r,h+a*r,a-h*r,h,a]}var nt=function(n,r,e,i,h,a,u,c,s){var f=Math.sin(s*b/360),l=Math.cos(s*b/360),o=l*(n-e)/2+f*(r-i)/2,d=-f*(n-e)/2+l*(r-i)/2;if(o===0&&d===0)return[];if(u===0||c===0)return[];u=Math.abs(u),c=Math.abs(c);var _=o*o/(u*u)+d*d/(c*c);_>1&&(u*=Math.sqrt(_),c*=Math.sqrt(_));var v=rt(n,r,e,i,h,a,u,c,f,l),m=[],C=v[2],x=v[3],y=Math.max(Math.ceil(Math.abs(x)/(b/4)),1);x/=y;for(var X=0;X<y;X++)m.push(at(C,x)),C+=x;return m.map(function(M){for(var w=0;w<M.length;w+=2){var q=M[w+0],P=M[w+1];q*=u,P*=c;var D=l*q-f*P,S=f*q+l*P;M[w+0]=D+v[0],M[w+1]=S+v[1]}return M})},F=1e-10,R=Math.PI/180;function L(t,n,r){if(!(this instanceof L))return new L(t,n,r);this.rx=t,this.ry=n,this.ax=r}L.prototype.transform=function(t){var n=Math.cos(this.ax*R),r=Math.sin(this.ax*R),e=[this.rx*(t[0]*n+t[2]*r),this.rx*(t[1]*n+t[3]*r),this.ry*(-t[0]*r+t[2]*n),this.ry*(-t[1]*r+t[3]*n)],i=e[0]*e[0]+e[2]*e[2],h=e[1]*e[1]+e[3]*e[3],a=((e[0]-e[3])*(e[0]-e[3])+(e[2]+e[1])*(e[2]+e[1]))*((e[0]+e[3])*(e[0]+e[3])+(e[2]-e[1])*(e[2]-e[1])),u=(i+h)/2;if(a<F*u)return this.rx=this.ry=Math.sqrt(u),this.ax=0,this;var c=e[0]*e[1]+e[2]*e[3];a=Math.sqrt(a);var s=u+a/2,f=u-a/2;return this.ax=Math.abs(c)<F&&Math.abs(s-h)<F?90:Math.atan(Math.abs(c)>Math.abs(s-h)?(s-i)/c:c/(s-h))*180/Math.PI,this.ax>=0?(this.rx=Math.sqrt(s),this.ry=Math.sqrt(f)):(this.ax+=90,this.rx=Math.sqrt(f),this.ry=Math.sqrt(s)),this};L.prototype.isDegenerate=function(){return this.rx<F*this.ry||this.ry<F*this.rx};var it=L,ht=Z,ut=et,k=$,ct=nt,st=it;function p(t){if(!(this instanceof p))return new p(t);var n=ht(t);this.segments=n.segments,this.err=n.err,this.__stack=[]}p.from=function(t){if(typeof t=="string")return new p(t);if(t instanceof p){var n=new p("");return n.err=t.err,n.segments=t.segments.map(function(r){return r.slice()}),n.__stack=t.__stack.map(function(r){return k().matrix(r.toArray())}),n}throw new Error("SvgPath.from: invalid param type "+t)};p.prototype.__matrix=function(t){var n=this,r;!t.queue.length||this.iterate(function(e,i,h,a){var u,c,s,f;switch(e[0]){case"v":u=t.calc(0,e[1],!0),c=u[0]===0?["v",u[1]]:["l",u[0],u[1]];break;case"V":u=t.calc(h,e[1],!1),c=u[0]===t.calc(h,a,!1)[0]?["V",u[1]]:["L",u[0],u[1]];break;case"h":u=t.calc(e[1],0,!0),c=u[1]===0?["h",u[0]]:["l",u[0],u[1]];break;case"H":u=t.calc(e[1],a,!1),c=u[1]===t.calc(h,a,!1)[1]?["H",u[0]]:["L",u[0],u[1]];break;case"a":case"A":var l=t.toArray(),o=st(e[1],e[2],e[3]).transform(l);if(l[0]*l[3]-l[1]*l[2]<0&&(e[5]=e[5]?"0":"1"),u=t.calc(e[6],e[7],e[0]==="a"),e[0]==="A"&&e[6]===h&&e[7]===a||e[0]==="a"&&e[6]===0&&e[7]===0){c=[e[0]==="a"?"l":"L",u[0],u[1]];break}o.isDegenerate()?c=[e[0]==="a"?"l":"L",u[0],u[1]]:c=[e[0],o.rx,o.ry,o.ax,e[4],e[5],u[0],u[1]];break;case"m":f=i>0,u=t.calc(e[1],e[2],f),c=["m",u[0],u[1]];break;default:for(s=e[0],c=[s],f=s.toLowerCase()===s,r=1;r<e.length;r+=2)u=t.calc(e[r],e[r+1],f),c.push(u[0],u[1])}n.segments[i]=c},!0)};p.prototype.__evaluateStack=function(){var t,n;if(!!this.__stack.length){if(this.__stack.length===1){this.__matrix(this.__stack[0]),this.__stack=[];return}for(t=k(),n=this.__stack.length;--n>=0;)t.matrix(this.__stack[n].toArray());this.__matrix(t),this.__stack=[]}};p.prototype.toString=function(){var t=[],n,r;this.__evaluateStack();for(var e=0;e<this.segments.length;e++)r=this.segments[e][0],n=e>0&&r!=="m"&&r!=="M"&&r===this.segments[e-1][0],t=t.concat(n?this.segments[e].slice(1):this.segments[e]);return t.join(" ").replace(/ ?([achlmqrstvz]) ?/gi,"$1").replace(/ \-/g,"-").replace(/zm/g,"z m")};p.prototype.translate=function(t,n){return this.__stack.push(k().translate(t,n||0)),this};p.prototype.scale=function(t,n){return this.__stack.push(k().scale(t,!n&&n!==0?t:n)),this};p.prototype.rotate=function(t,n,r){return this.__stack.push(k().rotate(t,n||0,r||0)),this};p.prototype.skewX=function(t){return this.__stack.push(k().skewX(t)),this};p.prototype.skewY=function(t){return this.__stack.push(k().skewY(t)),this};p.prototype.matrix=function(t){return this.__stack.push(k().matrix(t)),this};p.prototype.transform=function(t){return t.trim()?(this.__stack.push(ut(t)),this):this};p.prototype.round=function(t){var n=0,r=0,e=0,i=0,h;return t=t||0,this.__evaluateStack(),this.segments.forEach(function(a){var u=a[0].toLowerCase()===a[0];switch(a[0]){case"H":case"h":u&&(a[1]+=e),e=a[1]-a[1].toFixed(t),a[1]=+a[1].toFixed(t);return;case"V":case"v":u&&(a[1]+=i),i=a[1]-a[1].toFixed(t),a[1]=+a[1].toFixed(t);return;case"Z":case"z":e=n,i=r;return;case"M":case"m":u&&(a[1]+=e,a[2]+=i),e=a[1]-a[1].toFixed(t),i=a[2]-a[2].toFixed(t),n=e,r=i,a[1]=+a[1].toFixed(t),a[2]=+a[2].toFixed(t);return;case"A":case"a":u&&(a[6]+=e,a[7]+=i),e=a[6]-a[6].toFixed(t),i=a[7]-a[7].toFixed(t),a[1]=+a[1].toFixed(t),a[2]=+a[2].toFixed(t),a[3]=+a[3].toFixed(t+2),a[6]=+a[6].toFixed(t),a[7]=+a[7].toFixed(t);return;default:h=a.length,u&&(a[h-2]+=e,a[h-1]+=i),e=a[h-2]-a[h-2].toFixed(t),i=a[h-1]-a[h-1].toFixed(t),a.forEach(function(c,s){!s||(a[s]=+a[s].toFixed(t))});return}}),this};p.prototype.iterate=function(t,n){var r=this.segments,e={},i=!1,h=0,a=0,u=0,c=0,s,f,l;if(n||this.__evaluateStack(),r.forEach(function(o,d){var _=t(o,d,h,a);Array.isArray(_)&&(e[d]=_,i=!0);var v=o[0]===o[0].toLowerCase();switch(o[0]){case"m":case"M":h=o[1]+(v?h:0),a=o[2]+(v?a:0),u=h,c=a;return;case"h":case"H":h=o[1]+(v?h:0);return;case"v":case"V":a=o[1]+(v?a:0);return;case"z":case"Z":h=u,a=c;return;default:h=o[o.length-2]+(v?h:0),a=o[o.length-1]+(v?a:0)}}),!i)return this;for(l=[],s=0;s<r.length;s++)if(typeof e[s]!="undefined")for(f=0;f<e[s].length;f++)l.push(e[s][f]);else l.push(r[s]);return this.segments=l,this};p.prototype.abs=function(){return this.iterate(function(t,n,r,e){var i=t[0],h=i.toUpperCase(),a;if(i!==h)switch(t[0]=h,i){case"v":t[1]+=e;return;case"a":t[6]+=r,t[7]+=e;return;default:for(a=1;a<t.length;a++)t[a]+=a%2?r:e}},!0),this};p.prototype.rel=function(){return this.iterate(function(t,n,r,e){var i=t[0],h=i.toLowerCase(),a;if(i!==h&&!(n===0&&i==="M"))switch(t[0]=h,i){case"V":t[1]-=e;return;case"A":t[6]-=r,t[7]-=e;return;default:for(a=1;a<t.length;a++)t[a]-=a%2?r:e}},!0),this};p.prototype.unarc=function(){return this.iterate(function(t,n,r,e){var i,h,a,u=[],c=t[0];return c!=="A"&&c!=="a"?null:(c==="a"?(h=r+t[6],a=e+t[7]):(h=t[6],a=t[7]),i=ct(r,e,h,a,t[4],t[5],t[1],t[2],t[3]),i.length===0?[[t[0]==="a"?"l":"L",t[6],t[7]]]:(i.forEach(function(s){u.push(["C",s[2],s[3],s[4],s[5],s[6],s[7]])}),u))}),this};p.prototype.unshort=function(){var t=this.segments,n,r,e,i,h;return this.iterate(function(a,u,c,s){var f=a[0],l=f.toUpperCase(),o;!u||(l==="T"?(o=f==="t",e=t[u-1],e[0]==="Q"?(n=e[1]-c,r=e[2]-s):e[0]==="q"?(n=e[1]-e[3],r=e[2]-e[4]):(n=0,r=0),i=-n,h=-r,o||(i+=c,h+=s),t[u]=[o?"q":"Q",i,h,a[1],a[2]]):l==="S"&&(o=f==="s",e=t[u-1],e[0]==="C"?(n=e[3]-c,r=e[4]-s):e[0]==="c"?(n=e[3]-e[5],r=e[4]-e[6]):(n=0,r=0),i=-n,h=-r,o||(i+=c,h+=s),t[u]=[o?"c":"C",i,h,a[1],a[2],a[3],a[4]]))}),this};var ot=p,ft=ot;export{ft as s};
